'use strict';

/**
 * File: mobile-menu.js
 *
 * In charge of the main menu navigation on mobile/tablets.
 */
window.inpMcDebug = {};
(function (window, $, app) {

	// Constructor.
	app.init = function () {
		if (parseInt(inp_mc_data.is_debug) === 1) {
			app.createDebugDiv();
			app.updateDebugData();
			app.bindEvents();
		}
	};

	// Combine all events.
	app.bindEvents = function () {
		$('body').on('resize', app.updateDebugData);
	};

	// Create the debug div.
	app.createDebugDiv = function () {
		var debug_html = '<div class="debug-info"></div>';
		$(debug_html).appendTo('body');
	};

	// Update debug info in the debug div.
	app.updateDebugData = function () {
		var $debug = $('.debug-info');
		var data = '';

		// Viewport size.
		data += $(window).width() + 'x' + $(window).height();
		$debug.text(data);
	};

	// Engage!
	$(app.init);
})(window, jQuery, window.inpMcDebug);
'use strict';

/**
 * IE detector
 */
window.inpMcIeDetector = {};
(function (window, $, app) {

	// Constructor.
	app.init = function () {
		var ie_version = app.addBrowserCssSelector();

		if (ie_version) {
			$('html').addClass(ie_version);
		}
	};

	app.addBrowserCssSelector = function (u) {
		var ua = window.navigator.userAgent;var msie = ua.indexOf('MSIE ');
		if (msie > 0) {
			return 'ie ie' + parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);
		}
		var trident = ua.indexOf('Trident/');
		if (trident > 0) {
			var rv = ua.indexOf('rv:');return 'ie ie' + parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);
		}
		var edge = ua.indexOf('Edge/');
		if (edge > 0) {
			return 'ie ie' + parseInt(ua.substring(edge + 5, ua.indexOf('.', edge)), 10);
		}
		return false;
	};

	// Engage!
	$(app.init);
})(window, jQuery, window.inpMcIeDetector);
'use strict';

/**
 * File js-enabled.js
 *
 * If Javascript is enabled, replace the <body> class "no-js".
 */
document.documentElement.className = document.documentElement.className.replace('no-js', 'js');
'use strict';

/**
 * File: mobile-menu.js
 *
 * In charge of the main menu navigation on mobile/tablets.
 */
window.inpMcMobileMenu = {};
(function (window, $, app) {

	// Constructor.
	app.init = function () {
		app.cache();
		app.bindEvents();
		app.prepareMobileMenuMarkup();
	};

	// Cache all the things.
	app.cache = function () {
		app.$c = {
			html: $('html'),
			mobileMenu: $('header#masthead nav.main-navigation'),
			mobileMenuTrigger: $('.trigger-mobile-menu'),
			mobileMenuParents: $('header#masthead nav.main-navigation li.menu-item-has-children'),
			subMenus: $('header#masthead ul.sub-menu')
		};
	};

	// Combine all events.
	app.bindEvents = function () {
		app.$c.mobileMenuTrigger.on('click', app.openMobileMenu);
		app.$c.mobileMenu.on('click', '.close-mobile-menu', app.closeMobileMenu);
		app.$c.mobileMenu.on('click', '.parent-indicator', app.toggleSubMenu);
	};

	// Prepare menu markup (by adding the close button).
	app.prepareMobileMenuMarkup = function () {
		// Add close "X" button to menu.
		var close_button = '<span class="close-mobile-menu">X</span>';
		$(close_button).appendTo(app.$c.mobileMenu);
		app.$c.mobileMenu.attr('aria-expanded', false);

		// Add expand "+" button to items with children.
		app.$c.mobileMenuParents.prepend('<button type="button" aria-expanded="false" class="parent-indicator" aria-label="Open submenu"><span class="down-arrow">+</span></button>');
	};

	// Open mobile menu.
	app.openMobileMenu = function (e) {
		// Global class to let elements change styles when menu opens.
		app.$c.html.addClass('mobile-menu-active');

		app.$c.mobileMenu.addClass('active').attr('aria-expanded', true);
	};

	// Close mobile menu.
	app.closeMobileMenu = function (e) {
		app.$c.html.removeClass('mobile-menu-active');
		app.$c.mobileMenu.removeClass('active').attr('aria-expanded', false);
	};

	// Toggle (open/close) sub-menus.
	app.toggleSubMenu = function (e) {
		//app.$c.subMenus.slideUp();
		$(this).parent().find('> ul.sub-menu').stop().slideToggle();
	};

	// Engage!
	$(app.init);
})(window, jQuery, window.inpMcMobileMenu);
'use strict';

/**
 * File skip-link-focus-fix.js.
 *
 * Helps with accessibility for keyboard only users.
 *
 * Learn more: https://git.io/vWdr2
 */
(function () {
	var isWebkit = -1 < navigator.userAgent.toLowerCase().indexOf('webkit'),
	    isOpera = -1 < navigator.userAgent.toLowerCase().indexOf('opera'),
	    isIe = -1 < navigator.userAgent.toLowerCase().indexOf('msie');

	if ((isWebkit || isOpera || isIe) && document.getElementById && window.addEventListener) {
		window.addEventListener('hashchange', function () {
			var id = location.hash.substring(1),
			    element;

			if (!/^[A-z0-9_-]+$/.test(id)) {
				return;
			}

			element = document.getElementById(id);

			if (element) {
				if (!/^(?:a|select|input|button|textarea)$/i.test(element.tagName)) {
					element.tabIndex = -1;
				}

				element.focus();
			}
		}, false);
	}
})();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlYnVnLmpzIiwiaWUuanMiLCJqcy1lbmFibGVkLmpzIiwibW9iaWxlLW1lbnUuanMiLCJza2lwLWxpbmstZm9jdXMtZml4LmpzIl0sIm5hbWVzIjpbIndpbmRvdyIsImlucE1jRGVidWciLCIkIiwiYXBwIiwiaW5pdCIsInBhcnNlSW50IiwiaW5wX21jX2RhdGEiLCJpc19kZWJ1ZyIsImNyZWF0ZURlYnVnRGl2IiwidXBkYXRlRGVidWdEYXRhIiwiYmluZEV2ZW50cyIsIm9uIiwiZGVidWdfaHRtbCIsImFwcGVuZFRvIiwiJGRlYnVnIiwiZGF0YSIsIndpZHRoIiwiaGVpZ2h0IiwidGV4dCIsImpRdWVyeSIsImlucE1jSWVEZXRlY3RvciIsImllX3ZlcnNpb24iLCJhZGRCcm93c2VyQ3NzU2VsZWN0b3IiLCJhZGRDbGFzcyIsInUiLCJ1YSIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsIm1zaWUiLCJpbmRleE9mIiwic3Vic3RyaW5nIiwidHJpZGVudCIsInJ2IiwiZWRnZSIsImRvY3VtZW50IiwiZG9jdW1lbnRFbGVtZW50IiwiY2xhc3NOYW1lIiwicmVwbGFjZSIsImlucE1jTW9iaWxlTWVudSIsImNhY2hlIiwicHJlcGFyZU1vYmlsZU1lbnVNYXJrdXAiLCIkYyIsImh0bWwiLCJtb2JpbGVNZW51IiwibW9iaWxlTWVudVRyaWdnZXIiLCJtb2JpbGVNZW51UGFyZW50cyIsInN1Yk1lbnVzIiwib3Blbk1vYmlsZU1lbnUiLCJjbG9zZU1vYmlsZU1lbnUiLCJ0b2dnbGVTdWJNZW51IiwiY2xvc2VfYnV0dG9uIiwiYXR0ciIsInByZXBlbmQiLCJlIiwicmVtb3ZlQ2xhc3MiLCJwYXJlbnQiLCJmaW5kIiwic3RvcCIsInNsaWRlVG9nZ2xlIiwiaXNXZWJraXQiLCJ0b0xvd2VyQ2FzZSIsImlzT3BlcmEiLCJpc0llIiwiZ2V0RWxlbWVudEJ5SWQiLCJhZGRFdmVudExpc3RlbmVyIiwiaWQiLCJsb2NhdGlvbiIsImhhc2giLCJlbGVtZW50IiwidGVzdCIsInRh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KipcbiAqIEZpbGU6IG1vYmlsZS1tZW51LmpzXG4gKlxuICogSW4gY2hhcmdlIG9mIHRoZSBtYWluIG1lbnUgbmF2aWdhdGlvbiBvbiBtb2JpbGUvdGFibGV0cy5cbiAqL1xud2luZG93LmlucE1jRGVidWcgPSB7fTtcbiggZnVuY3Rpb24oIHdpbmRvdywgJCwgYXBwICkge1xuXG5cdC8vIENvbnN0cnVjdG9yLlxuXHRhcHAuaW5pdCA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmICggcGFyc2VJbnQoIGlucF9tY19kYXRhLmlzX2RlYnVnICkgPT09IDEgKSB7XG5cdFx0XHRhcHAuY3JlYXRlRGVidWdEaXYoKTtcblx0XHRcdGFwcC51cGRhdGVEZWJ1Z0RhdGEoKTtcblx0XHRcdGFwcC5iaW5kRXZlbnRzKCk7XG5cdFx0fVxuXHR9O1xuXG5cdC8vIENvbWJpbmUgYWxsIGV2ZW50cy5cblx0YXBwLmJpbmRFdmVudHMgPSBmdW5jdGlvbigpIHtcblx0XHQkKCAnYm9keScgKS5vbiggJ3Jlc2l6ZScsIGFwcC51cGRhdGVEZWJ1Z0RhdGEgKTtcblx0fTtcblxuXHQvLyBDcmVhdGUgdGhlIGRlYnVnIGRpdi5cblx0YXBwLmNyZWF0ZURlYnVnRGl2ID0gZnVuY3Rpb24oKSB7XG5cdFx0bGV0IGRlYnVnX2h0bWwgPSAnPGRpdiBjbGFzcz1cImRlYnVnLWluZm9cIj48L2Rpdj4nO1xuXHRcdCQoIGRlYnVnX2h0bWwgKS5hcHBlbmRUbyggJ2JvZHknICk7XG5cdH07XG5cblx0Ly8gVXBkYXRlIGRlYnVnIGluZm8gaW4gdGhlIGRlYnVnIGRpdi5cblx0YXBwLnVwZGF0ZURlYnVnRGF0YSA9IGZ1bmN0aW9uKCApIHtcblx0XHRsZXQgJGRlYnVnID0gJCggJy5kZWJ1Zy1pbmZvJyApO1xuXHRcdGxldCBkYXRhID0gJyc7XG5cblx0XHQvLyBWaWV3cG9ydCBzaXplLlxuXHRcdGRhdGEgKz0gJCggd2luZG93ICkud2lkdGgoKSArICd4JyArICQoIHdpbmRvdyApLmhlaWdodCgpO1xuXHRcdCRkZWJ1Zy50ZXh0KCBkYXRhICk7XG5cdH07XG5cblx0Ly8gRW5nYWdlIVxuXHQkKCBhcHAuaW5pdCApO1xuXG59KCB3aW5kb3csIGpRdWVyeSwgd2luZG93LmlucE1jRGVidWcgKSApO1xuIiwiLyoqXG4gKiBJRSBkZXRlY3RvclxuICovXG53aW5kb3cuaW5wTWNJZURldGVjdG9yID0ge307XG4oIGZ1bmN0aW9uKCB3aW5kb3csICQsIGFwcCApIHtcblxuXHQvLyBDb25zdHJ1Y3Rvci5cblx0YXBwLmluaXQgPSBmdW5jdGlvbigpIHtcblx0XHRsZXQgaWVfdmVyc2lvbiA9IGFwcC5hZGRCcm93c2VyQ3NzU2VsZWN0b3IoKTtcblxuXHRcdGlmICggaWVfdmVyc2lvbiApIHtcblx0XHRcdCQoICdodG1sJyApLmFkZENsYXNzKCBpZV92ZXJzaW9uICk7XG5cdFx0fVxuXHR9O1xuXHRcblx0YXBwLmFkZEJyb3dzZXJDc3NTZWxlY3RvciA9IGZ1bmN0aW9uKCB1ICkge1xuXHRcdHZhciB1YSA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50OyB2YXIgbXNpZSA9IHVhLmluZGV4T2YoJ01TSUUgJyk7XG5cdFx0aWYgKG1zaWUgPiAwKSB7IHJldHVybiAnaWUgaWUnICsgcGFyc2VJbnQodWEuc3Vic3RyaW5nKG1zaWUgKyA1LCB1YS5pbmRleE9mKCcuJywgbXNpZSkpLCAxMCk7IH1cblx0XHR2YXIgdHJpZGVudCA9IHVhLmluZGV4T2YoJ1RyaWRlbnQvJyk7XG5cdFx0aWYgKHRyaWRlbnQgPiAwKSB7IHZhciBydiA9IHVhLmluZGV4T2YoJ3J2OicpOyByZXR1cm4gJ2llIGllJyArIHBhcnNlSW50KHVhLnN1YnN0cmluZyhydiArIDMsIHVhLmluZGV4T2YoJy4nLCBydikpLCAxMCk7IH1cblx0XHR2YXIgZWRnZSA9IHVhLmluZGV4T2YoJ0VkZ2UvJyk7XG5cdFx0aWYgKGVkZ2UgPiAwKSB7IHJldHVybiAnaWUgaWUnICsgcGFyc2VJbnQodWEuc3Vic3RyaW5nKGVkZ2UgKyA1LCB1YS5pbmRleE9mKCcuJywgZWRnZSkpLCAxMCk7IH1cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH07XG5cblx0Ly8gRW5nYWdlIVxuXHQkKCBhcHAuaW5pdCApO1xuXG59KCB3aW5kb3csIGpRdWVyeSwgd2luZG93LmlucE1jSWVEZXRlY3RvciApICk7IiwiLyoqXG4gKiBGaWxlIGpzLWVuYWJsZWQuanNcbiAqXG4gKiBJZiBKYXZhc2NyaXB0IGlzIGVuYWJsZWQsIHJlcGxhY2UgdGhlIDxib2R5PiBjbGFzcyBcIm5vLWpzXCIuXG4gKi9cbmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc05hbWUgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NOYW1lLnJlcGxhY2UoICduby1qcycsICdqcycgKTsiLCIvKipcbiAqIEZpbGU6IG1vYmlsZS1tZW51LmpzXG4gKlxuICogSW4gY2hhcmdlIG9mIHRoZSBtYWluIG1lbnUgbmF2aWdhdGlvbiBvbiBtb2JpbGUvdGFibGV0cy5cbiAqL1xud2luZG93LmlucE1jTW9iaWxlTWVudSA9IHt9O1xuKCBmdW5jdGlvbiggd2luZG93LCAkLCBhcHAgKSB7XG5cblx0Ly8gQ29uc3RydWN0b3IuXG5cdGFwcC5pbml0ID0gZnVuY3Rpb24oKSB7XG5cdFx0YXBwLmNhY2hlKCk7XG5cdFx0YXBwLmJpbmRFdmVudHMoKTtcblx0XHRhcHAucHJlcGFyZU1vYmlsZU1lbnVNYXJrdXAoKTtcblx0fTtcblxuXHQvLyBDYWNoZSBhbGwgdGhlIHRoaW5ncy5cblx0YXBwLmNhY2hlID0gZnVuY3Rpb24oKSB7XG5cdFx0YXBwLiRjID0ge1xuXHRcdFx0aHRtbDogJCggJ2h0bWwnICksXG5cdFx0XHRtb2JpbGVNZW51OiAkKCAnaGVhZGVyI21hc3RoZWFkIG5hdi5tYWluLW5hdmlnYXRpb24nICksXG5cdFx0XHRtb2JpbGVNZW51VHJpZ2dlcjogJCggJy50cmlnZ2VyLW1vYmlsZS1tZW51JyApLFxuXHRcdFx0bW9iaWxlTWVudVBhcmVudHM6ICQoICdoZWFkZXIjbWFzdGhlYWQgbmF2Lm1haW4tbmF2aWdhdGlvbiBsaS5tZW51LWl0ZW0taGFzLWNoaWxkcmVuJyApLFxuXHRcdFx0c3ViTWVudXM6ICQoICdoZWFkZXIjbWFzdGhlYWQgdWwuc3ViLW1lbnUnICksXG5cdFx0fTtcblx0fTtcblxuXHQvLyBDb21iaW5lIGFsbCBldmVudHMuXG5cdGFwcC5iaW5kRXZlbnRzID0gZnVuY3Rpb24oKSB7XG5cdFx0YXBwLiRjLm1vYmlsZU1lbnVUcmlnZ2VyLm9uKCAnY2xpY2snLCBhcHAub3Blbk1vYmlsZU1lbnUgKTtcblx0XHRhcHAuJGMubW9iaWxlTWVudS5vbiggJ2NsaWNrJywgJy5jbG9zZS1tb2JpbGUtbWVudScsIGFwcC5jbG9zZU1vYmlsZU1lbnUgKTtcblx0XHRhcHAuJGMubW9iaWxlTWVudS5vbiggJ2NsaWNrJywgJy5wYXJlbnQtaW5kaWNhdG9yJywgYXBwLnRvZ2dsZVN1Yk1lbnUgKTtcblx0fTtcblxuXHQvLyBQcmVwYXJlIG1lbnUgbWFya3VwIChieSBhZGRpbmcgdGhlIGNsb3NlIGJ1dHRvbikuXG5cdGFwcC5wcmVwYXJlTW9iaWxlTWVudU1hcmt1cCA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vIEFkZCBjbG9zZSBcIlhcIiBidXR0b24gdG8gbWVudS5cblx0XHRsZXQgY2xvc2VfYnV0dG9uID0gJzxzcGFuIGNsYXNzPVwiY2xvc2UtbW9iaWxlLW1lbnVcIj5YPC9zcGFuPic7XG5cdFx0JCggY2xvc2VfYnV0dG9uICkuYXBwZW5kVG8oIGFwcC4kYy5tb2JpbGVNZW51ICk7XG5cdFx0YXBwLiRjLm1vYmlsZU1lbnUuYXR0ciggJ2FyaWEtZXhwYW5kZWQnLCBmYWxzZSApO1xuXG5cdFx0Ly8gQWRkIGV4cGFuZCBcIitcIiBidXR0b24gdG8gaXRlbXMgd2l0aCBjaGlsZHJlbi5cblx0XHRhcHAuJGMubW9iaWxlTWVudVBhcmVudHMucHJlcGVuZCggJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGFyaWEtZXhwYW5kZWQ9XCJmYWxzZVwiIGNsYXNzPVwicGFyZW50LWluZGljYXRvclwiIGFyaWEtbGFiZWw9XCJPcGVuIHN1Ym1lbnVcIj48c3BhbiBjbGFzcz1cImRvd24tYXJyb3dcIj4rPC9zcGFuPjwvYnV0dG9uPicgKTtcblx0fTtcblxuXHQvLyBPcGVuIG1vYmlsZSBtZW51LlxuXHRhcHAub3Blbk1vYmlsZU1lbnUgPSBmdW5jdGlvbiggZSApIHtcblx0XHQvLyBHbG9iYWwgY2xhc3MgdG8gbGV0IGVsZW1lbnRzIGNoYW5nZSBzdHlsZXMgd2hlbiBtZW51IG9wZW5zLlxuXHRcdGFwcC4kYy5odG1sLmFkZENsYXNzKCAnbW9iaWxlLW1lbnUtYWN0aXZlJyApO1xuXHRcdFxuXHRcdGFwcC4kYy5tb2JpbGVNZW51LmFkZENsYXNzKCAnYWN0aXZlJyApLmF0dHIoICdhcmlhLWV4cGFuZGVkJywgdHJ1ZSApO1xuXHR9O1xuXG5cdC8vIENsb3NlIG1vYmlsZSBtZW51LlxuXHRhcHAuY2xvc2VNb2JpbGVNZW51ID0gZnVuY3Rpb24oIGUgKSB7XG5cdFx0YXBwLiRjLmh0bWwucmVtb3ZlQ2xhc3MoICdtb2JpbGUtbWVudS1hY3RpdmUnICk7XG5cdFx0YXBwLiRjLm1vYmlsZU1lbnUucmVtb3ZlQ2xhc3MoICdhY3RpdmUnICkuYXR0ciggJ2FyaWEtZXhwYW5kZWQnLCBmYWxzZSApO1xuXHR9O1xuXG5cdC8vIFRvZ2dsZSAob3Blbi9jbG9zZSkgc3ViLW1lbnVzLlxuXHRhcHAudG9nZ2xlU3ViTWVudSA9IGZ1bmN0aW9uKCBlICkge1xuXHRcdC8vYXBwLiRjLnN1Yk1lbnVzLnNsaWRlVXAoKTtcblx0XHQkKCB0aGlzICkucGFyZW50KCkuZmluZCggJz4gdWwuc3ViLW1lbnUnICkuc3RvcCgpLnNsaWRlVG9nZ2xlKCk7XG5cdH07XG5cblx0Ly8gRW5nYWdlIVxuXHQkKCBhcHAuaW5pdCApO1xuXG59KCB3aW5kb3csIGpRdWVyeSwgd2luZG93LmlucE1jTW9iaWxlTWVudSApICk7XG4iLCIvKipcbiAqIEZpbGUgc2tpcC1saW5rLWZvY3VzLWZpeC5qcy5cbiAqXG4gKiBIZWxwcyB3aXRoIGFjY2Vzc2liaWxpdHkgZm9yIGtleWJvYXJkIG9ubHkgdXNlcnMuXG4gKlxuICogTGVhcm4gbW9yZTogaHR0cHM6Ly9naXQuaW8vdldkcjJcbiAqL1xuKCBmdW5jdGlvbigpIHtcblx0dmFyIGlzV2Via2l0ID0gLTEgPCBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkuaW5kZXhPZiggJ3dlYmtpdCcgKSxcblx0XHRpc09wZXJhID0gLTEgPCBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkuaW5kZXhPZiggJ29wZXJhJyApLFxuXHRcdGlzSWUgPSAtMSA8IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKCAnbXNpZScgKTtcblxuXHRpZiAoICggaXNXZWJraXQgfHwgaXNPcGVyYSB8fCBpc0llICkgJiYgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQgJiYgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgKSB7XG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoICdoYXNoY2hhbmdlJywgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgaWQgPSBsb2NhdGlvbi5oYXNoLnN1YnN0cmluZyggMSApLFxuXHRcdFx0XHRlbGVtZW50O1xuXG5cdFx0XHRpZiAoICEgKCAvXltBLXowLTlfLV0rJC8gKS50ZXN0KCBpZCApICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggaWQgKTtcblxuXHRcdFx0aWYgKCBlbGVtZW50ICkge1xuXHRcdFx0XHRpZiAoICEgKCAvXig/OmF8c2VsZWN0fGlucHV0fGJ1dHRvbnx0ZXh0YXJlYSkkL2kgKS50ZXN0KCBlbGVtZW50LnRhZ05hbWUgKSApIHtcblx0XHRcdFx0XHRlbGVtZW50LnRhYkluZGV4ID0gLTE7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRlbGVtZW50LmZvY3VzKCk7XG5cdFx0XHR9XG5cdFx0fSwgZmFsc2UgKTtcblx0fVxufSgpICk7XG4iXX0=
